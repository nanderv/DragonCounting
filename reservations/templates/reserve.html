{% extends 'base.html' %}
{% load static %}

{% block title %}Reserve for Bellettrie{% endblock %}
{% block content %}
    Due to government regulations, we have to work with reservations. Outside opening hours, the reservations are handled
    'ad-hoc', which means that the opener 'reserves' a spot for you.<br/>
    During opening hours we work with reservations. You have to reserve if you're planning to visit for a 'customer-task', not
    if you are a committee-member that wants to work on things.</br />

    <table>
    <tr><th>Timeslot Name</th><th>In Use</th><th>Capacity</th></tr>
        {% for timeslot in timeslots %}
            {% if timeslot.is_on_today %}
                {% if timeslot.get_len_res == timeslot.capacity %}
                    <tr><td>{{ timeslot.name }}</td><td colspan="2">FULL</td></tr>
                    {% else %}
        <tr><td>{{ timeslot.name }}</td><td>{{ timeslot.get_len_res }}</td><td>{{ timeslot.capacity }}</td></tr>
                    {% endif %}
    {% endif %}
    {% endfor %}
    </table>

    {% if instance %}
        <h3>Reservation succesful!</h3>
        <a href="/reserve">Reserve another</a>
    {% else %}
        <h3>Reserve a timeslot at bellettrie here</h3>
        You always reserve a timeslote for <i>today</i>. This means that if you reserve at 13:45, this has no meaning, because you're reserving for a timeslot in the past.
        <form method="post" action='#'>
            {% csrf_token %}
            <table>
                {{ form.as_table }}

            </table>
            <input type="submit" value="Reserve"></button>
        </form>
    {% endif %}

    {% if perms.reservations.change_reservation %}
        <h3>Reservations</h3>
        {% for timeslot in timeslots %}
            {% if timeslot.is_on_today %}
                <h4>{{ timeslot.name }}</h4>
                <table>
                    <tr>
                        <th>Name</th>
                    </tr>
                    {% for reservation in timeslot.get_reservations %}
                        <tr>
                            <td>{{ reservation.name }}</td>
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}
        {% endfor %}

    {% endif %}
    <h3>Privacy:</h3>
    This data will be visible to people who can open the room, during the day on which the reservation was made.<br/>
    The data submitted here will be stored for four weeks, for contact tracing in case of a corona case within the association.
    This data will only be read in this case.
{% endblock %}